function xmljsn(xmlString){const xmlDoc=new DOMParser().parseFromString(xmlString,'text/xml');const result={};function parseNode(node,obj){if(node.nodeType===1){const childObj={};for(let i=0;i<node.attributes.length;i++){const attribute=node.attributes[i];childObj[`_${attribute.nodeName}`]=attribute.nodeValue;}if(node.childNodes.length===1&&node.childNodes[0].nodeType===3){childObj['thetext']=node.childNodes[0].nodeValue.trim();}else{for(let i=0;i<node.childNodes.length;i++){const childNode=node.childNodes[i];parseNode(childNode,childObj);}}if(obj[node.nodeName]){if(!Array.isArray(obj[node.nodeName])){obj[node.nodeName]=[obj[node.nodeName]];}obj[node.nodeName].push(childObj);}else{obj[node.nodeName]=childObj;}}}parseNode(xmlDoc.documentElement,result);return result;}
